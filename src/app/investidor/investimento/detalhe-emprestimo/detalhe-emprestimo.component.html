<div class="background">
  <mat-card class="header mat-elevation-z8">
    <button mat-icon-button class="close" (click)="close()">
      <mat-icon>arrow_back</mat-icon>
    </button>
    <mat-card-title-group>
      <mat-card-title>{{empresa.nome}}</mat-card-title>
      <mat-card-subtitle>
        {{empresa.recebido | currencyFormat}} de
        {{empresa.total | currencyFormat}}
      </mat-card-subtitle>
    </mat-card-title-group>
    <mat-progress-spinner class="progress" mode="determinate" [diameter]="60" [value]="empresa.porcentagem"></mat-progress-spinner>
    <p class="progress-percentage">{{empresa.porcentagem}}<span>%</span>
    </p>
  </mat-card>

  <button mat-raised-button class="extended-fab-investir" color="accent" (click)="investir(empresa.id)" cdkInitialFocus>
    <mat-icon>attach_money</mat-icon>
    INVESTIR
  </button>

  <mat-tab-group class="tab-group text" (selectedIndexChange)="changeTab($event)">
    <mat-tab label="Geral">
      <ng-template mat-tab-label>
        <mat-icon>donut_small</mat-icon>
        <div *ngIf="tabSelected==0">Geral</div>
      </ng-template>
      <div class="tab-content">

        <div class="scrollable-container">
          <div class="scrollable-x">
            <img class="fotos" *ngFor="let foto of empresa.geral.img" src="{{foto}}">
          </div>
        </div>

        <mat-accordion>
          <mat-expansion-panel>
            <mat-expansion-panel-header>
              <mat-panel-title>Descrição</mat-panel-title>
            </mat-expansion-panel-header>
            <p>{{empresa.geral.descricao}}</p>        
          </mat-expansion-panel>
          
          <mat-expansion-panel>
            <mat-expansion-panel-header>
              <mat-panel-title>Motivo</mat-panel-title>
            </mat-expansion-panel-header>
            <p>{{empresa.geral.motivo}}</p>
          </mat-expansion-panel>
        </mat-accordion>

        <section class="mat-typography">
          <mat-grid-list cols="2" rowHeight="3:1" class="info-geral">
            <mat-grid-tile>
              <p>Garantia</p>
            </mat-grid-tile>
            <mat-grid-tile>
              <p>Fundação</p>
            </mat-grid-tile>
            <mat-grid-tile>          
              <h2>{{empresa.geral.avalista}}</h2>
            </mat-grid-tile>
            <mat-grid-tile>          
              <h2>{{empresa.geral.fundacao}}</h2>
            </mat-grid-tile>
            
            <mat-grid-tile>
              <p>Setor</p>
            </mat-grid-tile>
            <mat-grid-tile>
              <p>Cidade</p>
            </mat-grid-tile>
            <mat-grid-tile>          
              <h3>{{empresa.geral.setor}}</h3>
            </mat-grid-tile>
            <mat-grid-tile>          
              <h3 class="cidade">{{empresa.geral.cidade}}</h3>
            </mat-grid-tile>
          </mat-grid-list>
        </section>
      </div>

    </mat-tab>
    <mat-tab label="Financeiro">
      <ng-template mat-tab-label>
        <mat-icon>monetization_on</mat-icon>
        <div *ngIf="tabSelected==1">Financeiro</div>
      </ng-template>
      <div class="tab-content">
        <p>Faturamento</p>
        <div>
          <canvas #faturamentoChart></canvas>
        </div>
        <!-- <h2>Highlights</h2> -->
        <!-- <p>{{empresa.financeiro.descritivo}}</p> -->
        <mat-table #highlights [dataSource]="empresa.financeiro.highlights">
          <ng-container matColumnDef="info">
            <mat-header-cell *matHeaderCellDef> Highlights </mat-header-cell>
            <mat-cell *matCellDef="let element"> {{element.info}} </mat-cell>
          </ng-container>
          <ng-container matColumnDef="d3">
            <mat-header-cell *matHeaderCellDef> 2015 </mat-header-cell>
            <mat-cell *matCellDef="let element"> {{element.d3}} </mat-cell>
          </ng-container>
          <ng-container matColumnDef="d2">
            <mat-header-cell *matHeaderCellDef> 2016 </mat-header-cell>
            <mat-cell *matCellDef="let element"> {{element.d2}} </mat-cell>
          </ng-container>
          <ng-container matColumnDef="d1">
            <mat-header-cell *matHeaderCellDef> 2017* </mat-header-cell>
            <mat-cell *matCellDef="let element"> {{element.d1}} </mat-cell>
          </ng-container>
          <mat-header-row *matHeaderRowDef="highlightsCol"></mat-header-row>
          <mat-row *matRowDef="let row; columns: highlightsCol;"></mat-row>
        </mat-table>
      </div>
    </mat-tab>
    <mat-tab label="Analise">
      <ng-template mat-tab-label>
        <mat-icon>thumb_up</mat-icon>
        <div *ngIf="tabSelected==2">Analise</div>
      </ng-template>
        <mat-card class="margin align-center">
          <h3>RATING</h3>
          <h1>{{empresa.rating | ratingFormat}}</h1>
        </mat-card>
        <mat-card class="margin">
          <div>
            <canvas #ratingChart></canvas>
          </div>
        </mat-card>
      <div class="tab-content">      
        <p>Nossa análise</p>
        <p>{{empresa.analise.comentario}}</p>
      </div>
    </mat-tab>
    <mat-tab label="Outros">
      <ng-template mat-tab-label>
        <mat-icon>more</mat-icon>
        <div *ngIf="tabSelected==3">Outros</div>
      </ng-template>
      <div class="tab-content">
        
        <mat-accordion>
          <mat-expansion-panel [expanded]="true">
            <mat-expansion-panel-header>
              <mat-panel-title>Cadastro</mat-panel-title>
            </mat-expansion-panel-header>
            <!-- <p>{{empresa.geral.descricao}}</p> -->
          </mat-expansion-panel>
        
          <mat-expansion-panel>
            <mat-expansion-panel-header>
              <mat-panel-title>Societário/Gerenciais</mat-panel-title>
            </mat-expansion-panel-header>
            <!-- <p>{{empresa.geral.motivo}}</p> -->
          </mat-expansion-panel>

          <mat-expansion-panel>
            <mat-expansion-panel-header>
              <mat-panel-title>Operacionais</mat-panel-title>
            </mat-expansion-panel-header>
            <!-- <p>{{empresa.geral.motivo}}</p> -->
          </mat-expansion-panel>
        </mat-accordion>


        <!-- <h2>Acionistas</h2>
                <mat-table #acionistas class="table" [dataSource]="empresa.geral.acionistas">
                  <ng-container matColumnDef="nome">
                    <mat-header-cell *matHeaderCellDef> Nome </mat-header-cell>
                    <mat-cell *matCellDef="let element"> {{element.nome}} </mat-cell>
                  </ng-container>
                  <ng-container matColumnDef="porcentagem">
                    <mat-header-cell *matHeaderCellDef> % </mat-header-cell>
                    <mat-cell *matCellDef="let element"> {{element.porcentagem}} </mat-cell>
                  </ng-container>
                  <mat-header-row *matHeaderRowDef="acionistasCol"></mat-header-row>
                  <mat-row *matRowDef="let row; columns: acionistasCol;"></mat-row>
                </mat-table>
                <mat-divider></mat-divider>
        
                <h2>Outras</h2>
                <h4>Avalista:</h4>
                <p>{{empresa.geral.avalista}}</p>
                <h4>CNPJ:</h4>
                <p>{{empresa.geral.cnpj}}</p>
                <h4>Número de Empregados:</h4>
                <p>{{empresa.geral.empregados}}</p>
                <h4>Data de Fundação:</h4>
                <p>{{empresa.geral.fundacao}}</p>
        
                <h4>Página Web:</h4>
                <p>{{empresa.geral.site}}</p>
        
                <h4>Endereço:</h4>
                <p>{{empresa.geral.endereco}}</p> -->
      </div>
    </mat-tab>
  </mat-tab-group>

</div>